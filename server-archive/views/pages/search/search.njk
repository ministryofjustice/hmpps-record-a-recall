{% extends "../../partials/layout.njk" %}

{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/input/macro.njk" import govukInput %}

{% set title = "Find a person" %}

{% block head %}
    {{ super() }}
    <script src="/assets/js/textInputWithCharacterCount.js"></script>
{% endblock %}

{% block header %}
    {{ super() }}
{% endblock %}

{% block beforeContent %}
    <div class="govuk-width-container">
        <div class="govuk-grid-row govuk-!-margin-bottom-0">
            <div class="govuk-grid-column-two-thirds">
                {% include "partials/errorSummary.njk" %}
            </div>
        </div>
    </div>
{% endblock %}

{% block content %}
    {% set formMethod = options.method | default('post') %}
    {% set formAction = options.action | default('') %}
    {% set formEnctype = options.enctype | default('') %}

    <div class="govuk-width-container">
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds">
                <span class="govuk-caption-l">Record a recall</span>
                <h1 class="govuk-heading-l">Enter a NOMIS ID</h1>


                <form method="{{ formMethod }}" action="{{ formAction }}"
                        {% if formEnctype %}
                            enctype="{{ formEnctype }}"
                        {% endif %}
                >

                    {% if formMethod == 'post' %}
                        <input type="hidden" name="_csrf" value="{{ csrfToken }}">
                    {% endif %}

                    {% block fields %}
                        {{ govukInput({
                            id: "nomisId",
                            name: "nomisId",
                            label: {
                                text: "NOMIS ID",
                                classes: "govuk-fieldset__legend--m"
                            },
                            classes: "govuk-!-width-three-quarters",
                            value: formResponses.nomisId or nomisId,
                            errorMessage: validationErrors | findError('nomisId'),
                            autocomplete: "off"
                        }) }}
                    {% endblock %}

                    <div class="govuk-button-group">
                        {% block formActions %}
                            {% block submitAction %}
                                {{ govukButton({
                                    text: "Search",
                                    classes: options.buttonClasses,
                                    preventDoubleClick: true,
                                    type: "submit"
                                }) }}
                            {% endblock %}
                        {% endblock %}
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock %}
