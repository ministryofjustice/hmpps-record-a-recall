{% extends "./prisonerBannerBackLayout.njk" %}

{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/inset-text/macro.njk" import govukInsetText %}

{% set title = "Check your answers" %}
{% set pageTitle = applicationName + " - " + title %}
{% set pageCaption = "Record a recall" %}

{% block pageContent %}
    <h1 class="govuk-heading-l" id="check-answers-heading">{{ title }}</h1>

    {{ govukSummaryList({
        attributes: { id: "check-answers" },
        rows: [
            {
                key: {
                    text: 'Date of revocation'
                },
                value: {
                    text: recall.revocationDate | formatDate
                },
                actions: {
                    items: [{
                        href: '/person/' + nomsId + '/recall/create/' + journeyId + '/revocation-date',
                        text: 'Edit'
                    }]
                }
            },
            {
                key: {
                    text: 'Arrest date'
                },
                value: {
                    text: 'In custody at revocation' if recall.inPrisonOnRevocationDate else (recall.returnToCustodyDate | formatDate) 
                },
                actions: {
                    items: [{
                        href: '/person/' + nomsId + '/recall/create/' + journeyId + '/return-to-custody-date',
                        text: 'Edit'
                    }]
                }
            },
            {
                key: {
                    text: 'Sentences'
                },
                value: {
                    text: recall.sentenceIds.length + (' sentence'  | pluralise(recall.sentenceIds.length))
                },
                actions: {
                    items: [{
                        href: '/person/' + nomsId + '/recall/create/' + journeyId + '/review-sentences',
                        text: 'Review'
                    }]
                }
            },
            {
                key: {
                    text: 'Recall type'
                },
                value: {
                    text: recallTypeDescription
                },
                actions: {
                    items: [{
                        href: '/person/' + nomsId + '/recall/create/' + journeyId + '/recall-type',
                        text: 'Edit'
                    }]
                }
            }
        ]
    }) }}


    {% if ual %}
        {% set ualHtml %}
            These recall dates will create <b>{{ ual }} {{ 'day'  | pluralise(ual) }}</b> of UAL.
            Once you have confirmed and saved this recall, you can review all UAL dates in the adjustments service.
        {% endset %}
        {{ govukInsetText({
            id: 'ual-text',
            html: ualHtml
        }) }}
    {% endif %}

    <form method="post" action="">
        <input type="hidden" name="_csrf" value="{{ csrfToken }}">

        <div class="govuk-button-group">
            {{ govukButton({
                text: "Continue",
                preventDoubleClick: true,
                attributes: { id: "submit" }
            }) }}
            {{ govukButton({
                text: "Cancel",
                classes: "govuk-button--secondary",
                href: cancelUrl,
                attributes: { id: "cancel-button" }
            }) }}
        </div>
    </form>
{% endblock %}
