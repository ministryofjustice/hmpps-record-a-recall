{% extends "../../partials/prisonerBannerLayout.njk" %}

{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}
{% from "govuk/components/button/macro.njk" import govukButton %}

{% set pageTitle = applicationName + " - check information" %}
{% set pageId = "check-information" %}

{% block content %}
  <h1 class="govuk-heading-xl" id="check-sentence-heading">Check sentence information</h1>
  <h1>Grouped Sentences</h1>

  {% if groupedSentences.onLicenceSentences.length > 0 %}
    <h2>On Licence Sentences</h2>
    <table class="govuk-table">
      <thead class="govuk-table__head">
      <tr class="govuk-table__row">
        <th class="govuk-table__header">Line Sequence</th>
        <th class="govuk-table__header">Sentenced At</th>
        <th class="govuk-table__header">Sentence Length</th>
        <th class="govuk-table__header">Consecutive To</th>
        <th class="govuk-table__header">Conditional Release Date (CRD)</th>
        <th class="govuk-table__header">Sentence Expiry Date (SED)</th>
      </tr>
      </thead>
      <tbody class="govuk-table__body">
      {% for sentence in groupedSentences.onLicenceSentences %}
        <tr class="govuk-table__row">
          <td class="govuk-table__cell">{{ sentence.lineSequence }}</td>
          <td class="govuk-table__cell">{{ sentence.sentencedAt }}</td>
          <td class="govuk-table__cell">{{ sentence.sentenceLength }}</td>
          <td class="govuk-table__cell">{{ sentence.consecutiveTo }}</td>
          <td class="govuk-table__cell">{{ sentence.crd }}</td>
          <td class="govuk-table__cell">{{ sentence.sled }}</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No sentences on licence.</p>
  {% endif %}

  {% if groupedSentences.activeSentences.length > 0 %}
    <h2>Active Sentences</h2>
    <table class="govuk-table">
      <thead class="govuk-table__head">
      <tr class="govuk-table__row">
        <th class="govuk-table__header">Line Sequence</th>
        <th class="govuk-table__header">Sentenced At</th>
        <th class="govuk-table__header">Sentence Length</th>
        <th class="govuk-table__header">Consecutive To</th>
        <th class="govuk-table__header">Conditional Release Date (CRD)</th>
        <th class="govuk-table__header">Sentence Expiry Date (SED)</th>
      </tr>
      </thead>
      <tbody class="govuk-table__body">
      {% for sentence in groupedSentences.activeSentences %}
        <tr class="govuk-table__row">
          <td class="govuk-table__cell">{{ sentence.lineSequence }}</td>
          <td class="govuk-table__cell">{{ sentence.sentencedAt }}</td>
          <td class="govuk-table__cell">{{ sentence.sentenceLength }}</td>
          <td class="govuk-table__cell">{{ sentence.consecutiveTo }}</td>
          <td class="govuk-table__cell">{{ sentence.crd }}</td>
          <td class="govuk-table__cell">{{ sentence.sled }}</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No active sentences.</p>
  {% endif %}

  {% if groupedSentences.expiredSentences.length > 0 %}
    <h2>Expired Sentences</h2>
    <table class="govuk-table">
      <thead class="govuk-table__head">
      <tr class="govuk-table__row">
        <th class="govuk-table__header">Line Sequence</th>
        <th class="govuk-table__header">Sentenced At</th>
        <th class="govuk-table__header">Sentence Length</th>
        <th class="govuk-table__header">Consecutive To</th>
        <th class="govuk-table__header">Conditional Release Date (CRD)</th>
        <th class="govuk-table__header">Sentence Expiry Date (SED)</th>
      </tr>
      </thead>
      <tbody class="govuk-table__body">
      {% for sentence in groupedSentences.expiredSentences %}
        <tr class="govuk-table__row">
          <td class="govuk-table__cell">{{ sentence.lineSequence }}</td>
          <td class="govuk-table__cell">{{ sentence.sentencedAt }}</td>
          <td class="govuk-table__cell">{{ sentence.sentenceLength }}</td>
          <td class="govuk-table__cell">{{ sentence.consecutiveTo }}</td>
          <td class="govuk-table__cell">{{ sentence.crd }}</td>
          <td class="govuk-table__cell">{{ sentence.sled }}</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No expired sentences.</p>
  {% endif %}


  <div class="govuk-button-group">
    {{ govukButton({
      text: "Continue",
      preventDoubleClick: true,
      href: '/person/' + nomsId + '/recall-entry/enter-recall-type'
    }) }}
  </div>
{% endblock %}
